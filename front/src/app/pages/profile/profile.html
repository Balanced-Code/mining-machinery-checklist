<div class="profile-container">
  <div class="profile-card">
    <!-- Sección: Información Personal -->
    <section class="profile-section">
      <div class="section-header">
        <svg class="section-icon" width="20" height="20" viewBox="0 0 24 24" fill="none">
          <path
            d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <circle
            cx="12"
            cy="7"
            r="4"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
        <h2 class="section-title">Información Personal</h2>
      </div>

      <div class="info-grid">
        <!-- Campo: Nombre Completo -->
        <div class="form-field">
          <label class="field-label">NOMBRE COMPLETO</label>
          <div class="input-container">
            <div class="input-wrapper readonly">
              <svg class="input-icon" width="16" height="16" viewBox="0 0 24 24" fill="none">
                <path
                  d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <circle
                  cx="12"
                  cy="7"
                  r="4"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              <span class="input-value">{{ user()?.nombre }}</span>
              <span class="input-badge">Solo admin</span>
            </div>
          </div>
          <p class="field-hint">Contacta al administrador para cambiar tu nombre</p>
        </div>

        <!-- Campo: Correo Electrónico -->
        <div class="form-field">
          <label class="field-label">CORREO ELECTRÓNICO</label>
          <div class="input-container">
            <div class="input-wrapper readonly">
              <svg class="input-icon" width="16" height="16" viewBox="0 0 24 24" fill="none">
                <path
                  d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <polyline
                  points="22,6 12,13 2,6"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              <span class="input-value">{{ user()?.correo }}</span>
              <span class="input-badge">No editable</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Cargo del usuario -->
      <div class="cargo-container">
        <label class="field-label">CARGO</label>
        <div class="cargo-info">
          <div
            class="cargo-badge"
            [style.background-color]="badgeColors().background"
            [style.color]="badgeColors().text"
            [style.border-color]="badgeColors().border"
          >
            <svg class="cargo-icon" width="12" height="12" viewBox="0 0 24 24" fill="none">
              <path
                d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <circle
                cx="9"
                cy="7"
                r="4"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
            <span>{{ currentCargo()?.nombre }}</span>
          </div>
          <span class="cargo-company">• Normet</span>
        </div>
      </div>
    </section>

    <!-- Sección: Seguridad de la Cuenta -->
    <section class="profile-section">
      <div class="section-header">
        <svg class="section-icon" width="20" height="20" viewBox="0 0 24 24" fill="none">
          <rect
            x="3"
            y="11"
            width="18"
            height="11"
            rx="2"
            ry="2"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <path
            d="M7 11V7a5 5 0 0 1 10 0v4"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
        <h2 class="section-title">Seguridad de la Cuenta</h2>
      </div>

      <form [formGroup]="passwordForm" (ngSubmit)="onSubmit()" class="password-form">
        <!-- Campo: Contraseña Actual -->
        <div class="form-field">
          <label class="field-label">CONTRASEÑA ACTUAL</label>
          <div class="input-container">
            <div class="input-wrapper">
              <svg class="input-icon" width="16" height="16" viewBox="0 0 24 24" fill="none">
                <rect
                  x="3"
                  y="11"
                  width="18"
                  height="11"
                  rx="2"
                  ry="2"
                  stroke="currentColor"
                  stroke-width="2"
                />
                <path d="M7 11V7a5 5 0 0 1 10 0v4" stroke="currentColor" stroke-width="2" />
              </svg>
              <input
                [type]="showCurrentPassword() ? 'text' : 'password'"
                formControlName="currentPassword"
                placeholder="Ingresa tu contraseña actual"
                class="input-field"
              />
              <button
                type="button"
                class="toggle-password"
                (click)="toggleCurrentPassword()"
                aria-label="Mostrar/ocultar contraseña"
              >
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                  @if (showCurrentPassword()) {
                  <path
                    d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <line
                    x1="1"
                    y1="1"
                    x2="23"
                    y2="23"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  } @else {
                  <path
                    d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <circle
                    cx="12"
                    cy="12"
                    r="3"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  }
                </svg>
              </button>
            </div>
          </div>
        </div>

        <!-- Campo: Nueva Contraseña -->
        <div class="form-field">
          <label class="field-label">NUEVA CONTRASEÑA</label>
          <div class="input-container">
            <div class="input-wrapper">
              <svg class="input-icon" width="16" height="16" viewBox="0 0 24 24" fill="none">
                <rect
                  x="3"
                  y="11"
                  width="18"
                  height="11"
                  rx="2"
                  ry="2"
                  stroke="currentColor"
                  stroke-width="2"
                />
                <path d="M7 11V7a5 5 0 0 1 10 0v4" stroke="currentColor" stroke-width="2" />
              </svg>
              <input
                [type]="showNewPassword() ? 'text' : 'password'"
                formControlName="newPassword"
                placeholder="Ingresa tu nueva contraseña"
                class="input-field"
              />
              <button
                type="button"
                class="toggle-password"
                (click)="toggleNewPassword()"
                aria-label="Mostrar/ocultar contraseña"
              >
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                  @if (showNewPassword()) {
                  <path
                    d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <line
                    x1="1"
                    y1="1"
                    x2="23"
                    y2="23"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  } @else {
                  <path
                    d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <circle
                    cx="12"
                    cy="12"
                    r="3"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  }
                </svg>
              </button>
            </div>
          </div>
          <p class="field-hint">Mínimo 8 caracteres</p>
        </div>

        <!-- Campo: Confirmar Nueva Contraseña -->
        <div class="form-field">
          <label class="field-label">CONFIRMAR NUEVA CONTRASEÑA</label>
          <div class="input-container">
            <div class="input-wrapper">
              <svg class="input-icon" width="16" height="16" viewBox="0 0 24 24" fill="none">
                <rect
                  x="3"
                  y="11"
                  width="18"
                  height="11"
                  rx="2"
                  ry="2"
                  stroke="currentColor"
                  stroke-width="2"
                />
                <path d="M7 11V7a5 5 0 0 1 10 0v4" stroke="currentColor" stroke-width="2" />
              </svg>
              <input
                [type]="showConfirmPassword() ? 'text' : 'password'"
                formControlName="confirmPassword"
                placeholder="Confirma tu nueva contraseña"
                class="input-field"
              />
              <button
                type="button"
                class="toggle-password"
                (click)="toggleConfirmPassword()"
                aria-label="Mostrar/ocultar contraseña"
              >
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                  @if (showConfirmPassword()) {
                  <path
                    d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <line
                    x1="1"
                    y1="1"
                    x2="23"
                    y2="23"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  } @else {
                  <path
                    d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  <circle
                    cx="12"
                    cy="12"
                    r="3"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                  }
                </svg>
              </button>
            </div>
          </div>
        </div>

        <!-- Mensajes de error/éxito -->
        @if (successMessage()) {
        <div class="message success-message">{{ successMessage() }}</div>
        } @if (errorMessage()) {
        <div class="message error-message">{{ errorMessage() }}</div>
        } @if (passwordForm.hasError('passwordMismatch') && passwordForm.touched) {
        <div class="message error-message">Las contraseñas no coinciden</div>
        }

        <!-- Botón de envío -->
        <button
          type="submit"
          class="submit-button"
          [disabled]="passwordForm.invalid || isLoading()"
        >
          @if (isLoading()) {
          <span>Actualizando...</span>
          } @else {
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
            <path
              d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <polyline
              points="17 21 17 13 7 13 7 21"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <polyline
              points="7 3 7 8 15 8"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
          <span>Actualizar Contraseña</span>
          }
        </button>

        <!-- Mensaje informativo -->
        <div class="info-box">
          <svg class="info-icon" width="16" height="16" viewBox="0 0 24 24" fill="none">
            <circle
              cx="12"
              cy="12"
              r="10"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <line
              x1="12"
              y1="16"
              x2="12"
              y2="12"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <line
              x1="12"
              y1="8"
              x2="12.01"
              y2="8"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
          <p class="info-text">
            Por seguridad, se recomienda usar una contraseña única que combine letras mayúsculas,
            minúsculas, números y símbolos especiales.
          </p>
        </div>
      </form>
    </section>
  </div>
</div>
