<header class="header">
  <div class="header-container">
    <!-- Hamburger menu (solo mobile) -->
    @if (sidebarService.isMobile()) {
    <button class="hamburger-btn" (click)="toggleSidebar()">
      <span class="material-icons">menu</span>
    </button>
    }

    <!-- Sección Logo + Separador (ancho fijo 280px como sidebar) -->
    <div class="logo-section">
      <!-- Logo clickeable -->
      <button class="logo-btn" (click)="goToDashboard()" aria-label="Ir al inicio">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="665"
          height="140"
          viewBox="0 0 665 140"
          focusable="false"
          class="logo"
          aria-label="Normet"
        >
          <path
            fill="#1D1D1B"
            d="M659.8 102c-10.1 0-11.6.7-11.6-8.7l.2-28.5H663V31.6h-14.6L648.2 0l-40.7 19.4v12.2h-6v33.2h6l-.2 34.2c0 35.7-1.4 39.2 52.5 36.2V102ZM519.5 77.7c-3.6-9.2 1-17.5 13.1-22.1 9.6-3.6 20.8.2 23.8 8l-36.9 14.1Zm76.5-5.3c-5.1-24.3-21.3-43.3-53.5-43.7-32.3-.3-57 21.7-57 55.7 0 34.7 25 53.6 57.2 53.6 23.5 0 23.7-.7 41.1-9.6v-32c-10.3 7.2-20.5 13.3-33.2 13-10.5-.4-22-3.3-24.8-10.2L596 72.4ZM0 135.2h37.5v-53c0-13.2 3-21.4 14.5-21.4 10.7 0 13.2 9.2 13.2 19.5v55h37.4V73c0-28.6-15.8-43-34.6-43-9.7 0-25-1.7-31 10.5v-9H0v103.7Zm309.8 0h38.4V84.5c0-12.3 2.2-22.7 13.3-22.7 10 0 12.8 6 12.8 21.2v52.2h38.1V84.5c0-12.3 2.2-22.7 13.3-22.7 10.1 0 12.9 6 12.9 21.2v52.2h38V74.5c0-28-9-42-36.8-44.8-9.8-1-24.6 1.7-32.8 14-4.6-11-17.3-14.3-31.6-14a33 33 0 0 0-27.1 14.4V31.6h-38.5v103.6Zm-81 0h39.6V99.5c-1.4-34.7 26.3-30.7 32.2-30.7l.4-37.2c-25.4 0-32.5 13.7-32.5 13.7V31.6H229v103.6Z"
          />
          <path
            fill="#E30621"
            d="M143.5 37.5V30h-28.8v50h28.8c1.6-14.1 9-19.9 20-21 13-1.2 28.6 5.3 28.3 23.8-.3 15.3-9.4 23.8-24.7 24-11.6.2-23-7.2-23.8-20.7H114c0 15.8 4.7 25 13 34a55.5 55.5 0 0 0 40 15.9 53.2 53.2 0 0 0 38.5-15.8 52.5 52.5 0 0 0-2.8-77A54.6 54.6 0 0 0 167 30c-11 0-14.2 2-23.6 7.5"
          />
        </svg>
      </button>

      <!-- Separador vertical (solo desktop/tablet) -->
      @if (!sidebarService.isMobile()) {
      <div class="separator"></div>
      }
    </div>

    <!-- Contenedor derecho: Título/Descripción + Usuario -->
    <div class="header-right">
      <!-- Título y descripción de la página (oculto en mobile) -->
      @if (!sidebarService.isMobile()) {
      <div class="page-info">
        <h1 class="page-title">{{ title() }}</h1>
        <p class="page-description">{{ description() }}</p>
      </div>
      }

      <!-- Información del usuario -->
      <div class="user-menu-wrapper">
        <button class="user-info" (click)="toggleMenu($event)">
          <!-- User text (oculto en mobile) -->
          @if (!sidebarService.isMobile()) {
          <div class="user-text">
            <p class="user-name">{{ fullName }}</p>
            <p class="user-role">{{ currentCargo()?.nombre }}</p>
          </div>
          }
          <div class="user-avatar" [style.background-color]="avatarBgColor()">
            <span class="avatar-initials">{{ userInitials }}</span>
          </div>
          <span class="material-icons chevron-icon" [class.chevron-open]="isMenuOpen()"
            >expand_more</span
          >
        </button>

        <!-- Menú contextual -->
        @if (isMenuOpen()) {
        <div class="user-dropdown">
          <!-- Información del usuario (solo mobile) -->
          @if (sidebarService.isMobile()) {
          <div class="dropdown-user-info">
            <p class="dropdown-user-name">{{ fullName }}</p>
            <p
              class="dropdown-user-role"
              [style.background-color]="badgeColors().background"
              [style.color]="badgeColors().text"
              [style.border-color]="badgeColors().border"
            >
              {{ currentCargo()?.nombre }}
            </p>
          </div>
          <div class="dropdown-divider"></div>
          }

          <button class="dropdown-item" (click)="goToProfile()">
            <span class="material-icons">person</span>
            <span>Mi Perfil</span>
          </button>
          <div class="dropdown-divider"></div>
          <button class="dropdown-item dropdown-item-danger" (click)="handleLogout()">
            <span class="material-icons">logout</span>
            <span>Cerrar Sesión</span>
          </button>
        </div>
        }
      </div>
    </div>
  </div>
</header>
