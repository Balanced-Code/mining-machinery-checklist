<!-- Backdrop para mobile -->
@if (sidebarService.isMobile() && sidebarService.isOpen()) {
<div class="sidebar-backdrop" (click)="closeOnBackdrop()"></div>
}

<aside
  [class.sidebar]="true"
  [class.sidebar-open]="sidebarService.isOpen()"
  [class.sidebar-closed]="!sidebarService.isOpen()"
  [class.sidebar-mobile]="sidebarService.isMobile()"
  [class.sidebar-tablet]="sidebarService.isTablet()"
>
  <!-- Header del sidebar -->
  <div class="sidebar-header">
    @if (sidebarService.isOpen()) {
    <div class="sidebar-title">
      <h2>Menú</h2>
      <p>Navegación principal</p>
    </div>
    }
    <button
      class="toggle-button"
      (click)="toggleSidebar()"
      [attr.aria-label]="sidebarService.isOpen() ? 'Cerrar menú' : 'Abrir menú'"
    >
      @if (sidebarService.isMobile() && sidebarService.isOpen()) {
      <!-- X para cerrar en mobile -->
      <span class="material-icons">close</span>
      } @else {
      <!-- Flecha para desktop/tablet -->
      <span class="material-icons">chevron_left</span>
      }
    </button>
  </div>

  <!-- Navigation -->
  <nav class="sidebar-nav">
    @for (item of menuItems(); track item.route) {
    <a
      [routerLink]="item.route"
      routerLinkActive="active"
      class="menu-item"
      [attr.aria-label]="item.label"
      (click)="onNavigate()"
    >
      <!-- Icono -->
      <span class="menu-icon" [attr.data-icon]="item.icon"></span>
      <!-- Texto (solo visible cuando el sidebar está abierto) -->
      @if (sidebarService.isOpen()) {
      <span class="menu-label">{{ item.label }}</span>
      }
    </a>
    }
  </nav>
</aside>
